---
import { getCollection } from "astro:content";
import CollectionItemTitle from "~components/collectionItemTitle.astro";
import CollectionName from "~components/collectionName.astro";
import SingleItemCoverImage from "~components/SingleItemCoverImage.astro";
import Layout from "~layouts/Layout.astro";

import gPlaySvg from "~images/gPlay.svg?raw";
import appStoreSvg from "~images/appStore.svg?raw";

export async function getStaticPaths() {
	const allFR = await getCollection("yatirimci-iliskileri-mobil-uygulamasi");
	return allFR.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

const title = entry.data.title;
const description = entry.data.description;
const collection = entry.collection;
const slug = entry.slug;
const category = entry.data.category;
const coverImage = entry.data.coverImage;
const appStoreLink = entry.data.appStoreLink;
const gPlayLink = entry.data.gPlayLink;
---

<Layout title={title} description={description} seoImage={`${import.meta.env.SITE}${collection}/${slug}/${slug}-og.png`}>
	{category && <CollectionName category={category} collection={collection} />}
	<CollectionItemTitle collectionItemTitle={title} />

	<SingleItemCoverImage src={coverImage} coverImageAlt={title} />

	<div class="my-4 grid grid-cols-1 gap-4 lg:my-8 lg:grid-cols-12 lg:gap-8">
		<div class="flex flex-col gap-8 sm:flex-row lg:col-span-5">
			<a href={appStoreLink} target="_blank" aria-label={`${title} App Store Link`}><Fragment set:html={appStoreSvg} /></a>
			<a href={gPlayLink} target="_blank" aria-label={`${title} Google Play Link`}><Fragment set:html={gPlaySvg} /></a>
		</div>

		<div class="prose-h3:font-base prose prose-h3:mb-0 prose-h3:text-base prose-h3:font-normal prose-h3:text-mavi prose-p:mb-4 prose-p:mt-0 prose-a:no-underline lg:col-span-7">
			<Content />
		</div>
	</div>
</Layout>

---
import { getCollection } from "astro:content";
import SingleItemLayout from "~layouts/SingleItemLayout.astro";
import MultiItemLayout from "~layouts/MultiItemLayout.astro";

export async function getStaticPaths() {
    const allFR = await getCollection("entegre-faaliyet-raporu");
    return allFR.map((entry) => ({
        params: { slug: entry.slug },
        props: { entry, itemType: entry.data.type },
    }));
}

const { entry, itemType } = Astro.props;
const { Content } = await entry.render();
---

{
    itemType == "singleItem" ? (
        <SingleItemLayout
            title={entry.data.title}
            description={entry.data.spot}
            seoImage={entry.data.thumbnail.src}
            collection={entry.collection}
            spot={entry.data.spot}
            category={entry.data.category}
            awarded={entry.data.awarded}
            coverImage={entry.data.coverImage}
            otherImages={entry.data.otherImages}
        >
            <Content />
        </SingleItemLayout>
    ) : itemType == "multiItem" ? (
        <MultiItemLayout
            title={entry.data.title}
            description={entry.data.spot}
            collection={entry.collection}
            spot={entry.data.spot}
            category={entry.data.category}
            coverImage={entry.data.coverImage}
        >
            <Content />
        </MultiItemLayout>
    ) : (
        (Astro.response.status = 404) && (Astro.response.statusText = "neither 'singleItem' nor 'multiItem'")
    )
}
